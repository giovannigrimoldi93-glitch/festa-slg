<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>San Luigi - Gestione Ordini</title>
  <link rel="stylesheet" href="style.css">
  <script type="module" src="script.js" defer></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <!-- Favicon standard (desktop e tab browser) -->
<link rel="icon" type="image/svg+xml" href="https://raw.githubusercontent.com/giovannigrimoldi93-glitch/bar-sl-files/refs/heads/main/Logo-parrocchia-2.svg">

<!-- Per Safari/iOS (quando aggiungi alla schermata Home) -->
<link rel="apple-touch-icon" href="https://raw.githubusercontent.com/giovannigrimoldi93-glitch/bar-sl-files/refs/heads/main/Logo-parrocchia-2.svg">

<!-- Fallback per vecchi browser -->
<link rel="icon" type="image/png" href="https://raw.githubusercontent.com/giovannigrimoldi93-glitch/bar-sl-files/refs/heads/main/Logo-parrocchia-2.png">
</head>
<body>
  <header>
    <img src="https://raw.githubusercontent.com/giovannigrimoldi93-glitch/bar-sl-files/refs/heads/main/Logo-parrocchia-2.svg" alt="Logo Bar">
    <h1>San Luigi</h1>
    <nav>
      <button onclick="showPage('home')">Home</button>
      <button onclick="showPage('settings')">Impostazioni</button>
      <button onclick="showPage('history')">Storico</button>
    </nav>
  </header>

  <!-- HOME -->
 <section id="home" class="page">
  <h2>Gestione Ordini</h2>
  <div id="home-content">
    <!-- Colonna prodotti -->
    <div id="products-column">
      <div id="products-buttons"></div>
    </div>
    <!-- Colonna carrello -->
    <div id="cart-column">
      <div id="cart">
        <h3>Carrello</h3>
        <ul id="cart-list"></ul>
        <p id="cart-total">Totale: ‚Ç¨0.00</p>
        <button id="print-order">üñ®Ô∏è Stampa e invia</button>
      </div>
    </div>
  </div>
</section>

  <!-- IMPOSTAZIONI -->
  <section id="settings" class="page" style="display:none;">
    <h2>Impostazioni</h2>

    <h3>Categorie</h3>
    <form id="category-form" class="form">
      <input type="text" id="category-name" placeholder="Nome categoria" required>
      <input type="color" id="category-color" value="#004aad">
      <input type="number" id="category-order" placeholder="Ordine">
      <button type="submit">‚ûï Aggiungi Categoria</button>
    </form>
    <table class="styled-table">
      <thead>
        <tr>
          <th>Nome</th>
          <th>Colore</th>
          <th>Ordine</th>
          <th>Azioni</th>
        </tr>
      </thead>
      <tbody id="categories-list"></tbody>
    </table>

    <h3>Prodotti</h3>
    <form id="product-form" class="form">
      <input type="text" id="product-name" placeholder="Nome prodotto" required>
      <input type="number" step="0.01" id="product-price" placeholder="Prezzo" required>
      <input type="number" id="product-stock" placeholder="Stock (vuoto = infinito)">
      <select id="product-category"></select>
      <label><input type="checkbox" id="product-active" checked> Attivo</label>
      <button type="submit">‚ûï Aggiungi Prodotto</button>
    </form>
    <table class="styled-table">
      <thead>
        <tr>
          <th>Nome</th>
          <th>Prezzo</th>
          <th>Stock</th>
          <th>Attivo</th>
          <th>Categoria</th>
          <th>Azioni</th>
        </tr>
      </thead>
      <tbody id="products-list"></tbody>
    </table>
  </section>

  <!-- STORICO -->
  <section id="history" class="page" style="display:none;">
    <h2>Storico Ordini</h2>
    <form id="history-form" class="form">
      <input type="date" id="history-date" required>
      <button type="submit">Vai!</button>
    </form>
    <table class="styled-table">
      <thead>
        <tr>
          <th>Prodotto</th>
          <th>Quantit√†</th>
        </tr>
      </thead>
      <tbody id="history-table"></tbody>
    </table>
    <p id="history-total"><strong>Totale: ‚Ç¨0.00</strong></p>
    <button onclick="exportHistoryCSV()">‚¨áÔ∏è Export CSV</button>
    <button onclick="exportHistoryPDF()">‚¨áÔ∏è Export PDF</button>
    <button onclick="exportHistoryXLSX()">‚¨áÔ∏è Export XLSX</button>
  </section>

  <!-- MODAL CATEGORIA -->
  <div class="modal" id="modal-category">
    <div class="modal-content">
      <h3>Modifica Categoria</h3>
      <form id="form-edit-category">
        <input type="text" id="edit-cat-name" placeholder="Nome categoria" required>
        <input type="color" id="edit-cat-color">
        <input type="number" id="edit-cat-order" placeholder="Ordine">
        <button type="submit">üíæ Salva</button>
        <button type="button" class="modal-close" onclick="document.getElementById('modal-category').style.display='none'">Chiudi</button>
      </form>
    </div>
  </div>

  <!-- MODAL PRODOTTO -->
  <div class="modal" id="modal-product">
    <div class="modal-content">
      <h3>Modifica Prodotto</h3>
      <form id="form-edit-product">
        <input type="text" id="edit-prod-name" placeholder="Nome prodotto" required>
        <input type="number" step="0.01" id="edit-prod-price" placeholder="Prezzo" required>
        <input type="number" id="edit-prod-stock" placeholder="Stock (vuoto = infinito)">
        <select id="edit-prod-category"></select>
        <label><input type="checkbox" id="edit-prod-active"> Attivo</label>
        <button type="submit">üíæ Salva</button>
        <button type="button" class="modal-close" onclick="document.getElementById('modal-product').style.display='none'">Chiudi</button>
      </form>
    </div>
  </div>
</body>
</html>
